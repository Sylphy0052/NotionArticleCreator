# /title — タイトル改善コマンド
>
> **目的**：最終Markdown本文をもとに、改善された日本語タイトル候補を複数提示する。
> **出力**：JSON **のみ**（`{"candidates":[...]}` 形式）。余計な文字・説明・コードフェンスは禁止。

## 使用サブエージェント

- **TitleAgent**（`.claude/agents/title.md`）
  - このコマンドの主担当。本文と STYLE を考慮し、読者に分かりやすくクリックを誘う短い日本語タイトルを3〜5件生成する。
  - 出力は JSON 配列候補のみ。

## 入力（引数仕様）

- `--var STYLE`: `"A" | "B" | "C"`
  - A: 技術ブログ風（簡潔・実用的・行動志向）
  - B: 解説記事風（背景や比較を含み、理解を助ける）
  - C: ノート風（要点メモ的・ラフ）
- `--input-file`: **必須**。最終Markdown本文

## バリデーション（実行前）

- `STYLE` が A/B/C のいずれかであること。
- 入力Markdownが非空であること。

## 実行手順（フロー）

1. **TitleAgent** を呼び出し、以下の制約で候補生成を指示：
   - 出力は `{"candidates":["…","…","…"]}` のJSONのみ。
   - 候補は3〜5件。
   - 各タイトルは20文字以内を推奨。
   - 重複・曖昧語（「その他」「まとめ」等）は禁止。
   - STYLE に適合させる。
2. 生成結果を標準出力に返す。

## 出力（契約例）

```json
{
  "candidates": [
    "すぐに試せる〇〇入門",
    "背景から学ぶ〇〇の仕組み",
    "要点メモ：〇〇の活用法"
  ]
}
```

## 呼び出し例（バックエンド）

```bash
claude -p "/title \
  --var STYLE=A \
  --input-file /tmp/final.md"
```

## 失敗時の扱い（推奨）

- JSONパース不可能または候補数不足の場合、バックエンド側で `/repair` を自動実行（TARGET=OUTLINE_JSON は不要、JSON形式修復を適用）。
- 修復不能ならエラー通知（E400）を返し、ユーザーに再生成を促す。
